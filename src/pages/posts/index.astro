---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection("blog");
const pageTitle = "Blog";
---

<BaseLayout pageTitle={pageTitle}>
    <h2>Posts</h2>
    <p>This is a list of all posts on the site.</p>
    <ul>
        <!-- <li><a href="/posts/post-1/">Post 1</a></li>
        <li><a href="/posts/post-2/">Post 2</a></li>
        <li><a href="/posts/post-3/">Post 3</a></li> -->

        {allPosts.map((post: any) => <li><span class="pubDate">{post.data.pubDate.toISOString().slice(0, 10)}</span> <a href={`/posts/${post.id}/`}>{post.data.title}</a></li>)}
    </ul>
</BaseLayout>